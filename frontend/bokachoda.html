<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Routine</title>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Nosifer&family=Orbitron&family=Hind+Siliguri:wght@500&display=swap" rel="stylesheet">

<style>
body {
    background: radial-gradient(circle at top, #0a0a0a, #000000);
    color: #e5e5e5;
    font-family: 'Orbitron', sans-serif;
    overflow: hidden;
}

.horror-font {
    font-family: 'Nosifer', cursive;
}

.bangla-font {
    font-family: 'Hind Siliguri', sans-serif;
}

.fade-in {
    animation: fadeIn 2s ease forwards;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.glitch {
    animation: glitch 0.4s infinite;
}

@keyframes glitch {
    0% { text-shadow: 2px 2px red; }
    50% { text-shadow: -2px -2px cyan; }
    100% { text-shadow: 2px -2px magenta; }
}

.popup {
    animation: popup 1s ease forwards;
}

@keyframes popup {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.typewriter {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid red;
    animation: typing 3s steps(25), blink 0.8s infinite;
}

@keyframes typing {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink {
    50% { border-color: transparent; }
}

.shake {
    animation: shake 0.15s infinite;
}

@keyframes shake {
    0% { transform: translate(2px, 1px); }
    25% { transform: translate(-2px, -1px); }
    50% { transform: translate(2px, -1px); }
    75% { transform: translate(-2px, 1px); }
    100% { transform: translate(0); }
}

.flash {
    animation: flash 0.3s ease;
}

@keyframes flash {
    0% { background: white; }
    100% { background: black; }
}

/* Blood cursor */
* {
    cursor: url("blood-cursor.png"), auto;
}
</style>
</head>

<body class="flex items-center justify-center min-h-screen">

<!-- Hidden helper audio elements (added so JS can reference them safely) -->
<audio id="heartbeat" preload="auto">
    <source src="https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/acp.mp3" type="audio/mpeg">
</audio>
<audio id="glitchSound" preload="auto">
    <source src="https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/fokir.mp3" type="audio/mpeg">
</audio>

<!-- MAIN CONTAINER -->
<div id="app" class="text-center w-full px-4"></div>

<script>
const app = document.getElementById("app");
const heartbeat = document.getElementById("heartbeat");
const glitchSound = document.getElementById("glitchSound");

/* Start heartbeat on first user click (guarded) */
document.body.addEventListener("click", () => {
    if (heartbeat) {
        heartbeat.volume = 0.3;
        heartbeat.play().catch(()=>{});
    }
}, { once: true });

/* HOME PAGE - renders three buttons that call yesPage/noPage/idgfPage */
function homePage() {
    app.innerHTML = `
    <h1 class="horror-font text-4xl md:text-5xl mb-10 fade-in">
        Do you want the Spring 2026 9th semester Ultimate class routine for section 3?
    </h1>

    <div class="flex justify-center gap-10">
        <button id="yesBtn" onclick="yesPage()" class="px-6 py-3 bg-red-900 hover:bg-red-700 rounded-xl transition">YES</button>
        <button id="noBtn" onclick="noPage()" class="px-6 py-3 bg-gray-800 hover:bg-gray-600 rounded-xl transition">No</button>
        <button id="idgfBtn" onclick="idgfPage()" class="px-6 py-3 bg-black border border-red-700 hover:bg-red-900 rounded-xl transition">
            I don't give a Fuck
        </button>
    </div>
    `;
}

/* YES page logic (replaces broken top-level listeners) */
function yesPage() {
    app.innerHTML = `
    <div class="bangla-font text-4xl text-red-600 fade-in mb-6">
        সময় থাকতে ভালো হবে তো?
    </div>
    <div class="bangla-font text-2xl text-gray-300 mb-4">
        Press ENTER to accept my words
    </div>
    <audio id="yesAudio" autoplay>
        <source src="https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/fokir.mp3" type="audio/mpeg">
    </audio>
    `;

    // Wait for ENTER key
    function enterHandler(e) {
        if (e.key === "Enter") {
            document.removeEventListener("keydown", enterHandler);

            // Redirect to the image page with download button
            app.innerHTML = `
            <div class="popup bg-black flex flex-col justify-center items-center min-h-screen gap-4">
                <img src="Class_Routine_Spring2026_Sec-3.png" class="mx-auto max-w-md rounded-xl shadow-2xl">

                <a id="downloadBtn" href="Class_Routine_Spring2026_Sec-3.png" download
                   class="px-6 py-3 bg-red-900 text-white rounded-xl hover:bg-red-700 transition">
                    Download Routine
                </a>
            </div>
            `;

            // Play music instantly when download button is clicked (guarded)
            const downloadBtn = document.getElementById("downloadBtn");
            if (downloadBtn) {
                downloadBtn.addEventListener("click", () => {
                    const bgMusic = document.createElement("audio");
                    bgMusic.src = "https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/acp.mp3";
                    bgMusic.autoplay = true;
                    bgMusic.volume = 0.5;
                    document.body.appendChild(bgMusic);
                });
            }
        }
    }

    document.addEventListener("keydown", enterHandler);
}

/* NO page (keeps original behavior but safely references glitchSound) */
function noPage() {
    // Flash effect
    document.body.classList.add("flash");

    // Play glitch sound if it exists
    if (glitchSound) glitchSound.play().catch(() => {});

    setTimeout(() => {
        document.body.classList.remove("flash");

        // Step 1: Show WTF text
        app.innerHTML = `
            <div class="flex flex-col items-center justify-center h-screen">
                <div class="text-6xl horror-font glitch shake mb-10">WTF</div>
            </div>
        `;

        // Step 2: After 3s, show hidden video + dummy button
        setTimeout(() => {
            app.innerHTML = `
                <div class="relative flex justify-center items-center">

                    <video id="realVideo"
                           class="max-w-3xl mx-auto rounded-xl shadow-2xl opacity-0"
                           controls
                           playsinline
                           preload="auto">
                        <source src="https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/nikallowde.mp4" type="video/mp4">
                    </video>

                    <button id="dummyBtn"
                            class="absolute px-8 py-4 bg-black border-2 border-red-700
                                   text-red-600 text-2xl horror-font glitch
                                   hover:bg-red-900 transition">
                        ▶ BACK
                    </button>

                </div>
            `;

            const btn = document.getElementById("dummyBtn");
            const vid = document.getElementById("realVideo");

            // Ensure video is paused and hidden initially
            if (vid) {
                vid.pause();
                vid.classList.add("opacity-0");
            }

            // Step 3: Dummy button click → reveal video + play
            if (btn && vid) {
                btn.addEventListener("click", () => {
                    btn.remove();
                    vid.classList.remove("opacity-0");
                    vid.volume = 1;
                    vid.play().catch(err => console.log("Video play error:", err));
                });

                // Step 4: After video ends → redirect to home
                vid.addEventListener("ended", () => {
                    homePage();
                });
            }

        }, 3000); // Wait 3s before showing video

    }, 200); // End flash removal
}

/* IDGF PAGE */
function idgfPage() {
    app.innerHTML = `
    <div class="relative flex flex-col items-center justify-center min-h-screen bg-black gap-6">

        <!-- Video -->
        <video id="idgfVideo" autoplay controls
               class="max-w-4xl mx-auto rounded-xl shadow-2xl fade-in scale-95 hover:scale-100 transition-all duration-1000">
            <source src="https://raw.githubusercontent.com/black-007-web/Advanced_Calculator/main/frontend/backchodix.mp4" type="video/mp4">
        </video>

        <!-- Optional aesthetic overlay text -->
        <div class="absolute top-4 left-4 text-red-600 bangla-font text-2xl">
            Nikal bsdk...
        </div>

    </div>
    `;

    // Redirect to home page after video ends (guarded)
    const video = document.getElementById("idgfVideo");
    if (video) {
        video.addEventListener("ended", () => {
            homePage();
        });
    }
}

/* Start at home */
homePage();
</script>

</body>
</html>
