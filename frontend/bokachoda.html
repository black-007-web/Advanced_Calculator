<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Routine</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Nosifer&family=Orbitron&family=Hind+Siliguri:wght@500&display=swap" rel="stylesheet">

<style>
    body {
        background: radial-gradient(circle at top, #0a0a0a, #000000);
        color: #e5e5e5;
        font-family: 'Orbitron', sans-serif;
        overflow-x: hidden;
        min-height: 100vh;
        margin: 0;
    }

    .horror-font {
        font-family: 'Nosifer', cursive;
    }

    .bangla-font {
        font-family: 'Hind Siliguri', sans-serif;
    }

    .fade-in {
        animation: fadeIn 2s ease forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .glitch {
        animation: glitch 0.4s infinite;
    }

    @keyframes glitch {
        0% { text-shadow: 2px 2px red; }
        50% { text-shadow: -2px -2px cyan; }
        100% { text-shadow: 2px -2px magenta; }
    }

    .popup {
        animation: popup 1s ease forwards;
    }

    @keyframes popup {
        from { transform: scale(0); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    .typewriter {
        overflow: hidden;
        white-space: nowrap;
        border-right: 2px solid red;
        animation: typing 3s steps(25), blink 0.8s infinite;
    }

    @keyframes typing {
        from { width: 0; }
        to { width: 100%; }
    }

    @keyframes blink {
        50% { border-color: transparent; }
    }

    .shake {
        animation: shake 0.15s infinite;
    }

    @keyframes shake {
        0% { transform: translate(2px, 1px); }
        25% { transform: translate(-2px, -1px); }
        50% { transform: translate(2px, -1px); }
        75% { transform: translate(-2px, 1px); }
        100% { transform: translate(0); }
    }

    .flash {
        animation: flash 0.3s ease;
    }

    @keyframes flash {
        0% { background: white; }
        100% { background: black; }
    }

    /* Blood cursor */
    * {
        cursor: url("blood-cursor.png"), auto;
    }
</style>
</head>

<body class="flex items-center justify-center min-h-screen">

<audio id="heartbeat" loop>
  <source src="heartbeat.mp3" type="audio/mpeg">
</audio>

<audio id="glitchSound">
  <source src="glitch.mp3" type="audio/mpeg">
</audio>

<div id="app" class="text-center w-full px-4"></div>

<script>
const app = document.getElementById("app");
const heartbeat = document.getElementById("heartbeat");
const glitchSound = document.getElementById("glitchSound");

/* HELPER: Plays audio safely. 
   Browsers block audio unless triggered by a user action (click).
   This function catches errors if the browser blocks it.
*/
function playSound(filename, vol = 1, loop = false) {
    const audio = new Audio(filename);
    audio.volume = vol;
    audio.loop = loop;
    audio.play().catch(e => console.error("Audio play blocked by browser:", e));
    return audio;
}

/* Start heartbeat on first interaction anywhere on body */
document.body.addEventListener("click", () => {
    heartbeat.volume = 0.3;
    heartbeat.play().catch(() => {});
}, { once: true });

/* HOME PAGE */
function homePage() {
    app.innerHTML = `
    <h1 class="horror-font text-4xl md:text-5xl mb-10 fade-in">
        Do you want the Spring 2026 9th semester Ultimate class routine for section 3?
    </h1>

    <div class="flex justify-center gap-10 flex-wrap">
        <button id="btnYes" class="px-6 py-3 bg-red-900 hover:bg-red-700 rounded-xl transition">YES</button>
        <button id="btnNo" class="px-6 py-3 bg-gray-800 hover:bg-gray-600 rounded-xl transition">No</button>
        <button id="btnIdgf" class="px-6 py-3 bg-black border border-red-700 hover:bg-red-900 rounded-xl transition">
            I don't give a Fuck
        </button>
    </div>
    `;

    // Attach event listeners specifically to these IDs
    document.getElementById("btnYes").onclick = yesPage;
    document.getElementById("btnNo").onclick = noPage;
    document.getElementById("btnIdgf").onclick = idgfPage;
}

/* YES PAGE LOGIC */
function yesPage() {
    app.innerHTML = `
    <div class="bangla-font text-3xl mb-8 fade-in">
        কখনো কি ভেবেছো যে এই রুটিন কেন বিনামূল্যে পেতে যাচ্ছ?
    </div>

    <div class="flex justify-center gap-10 mb-8">
        <button id="innerYesBtn" class="px-6 py-3 bg-red-900 rounded-xl">YES</button>
        <button id="innerNoBtn" class="px-6 py-3 bg-gray-800 rounded-xl">NO</button>
    </div>
    `;

    // Inner YES Button Click
    document.getElementById("innerYesBtn").addEventListener("click", () => {
        // Play sound immediately on click to satisfy browser policy
        playSound("fokir.mp3", 1);

        app.innerHTML = `
        <div class="bangla-font text-4xl text-red-600 fade-in mb-6">
            সময় থাকতে ভালো হবা তো?
        </div>
        <div class="bangla-font text-2xl text-gray-300 mb-4">
            Press ENTER to accept my words
        </div>
        `;

        // Wait for ENTER key
        const enterHandler = (e) => {
            if (e.key === "Enter") {
                document.removeEventListener("keydown", enterHandler);
                
                // Show Image & Download Button
                app.innerHTML = `
                <div class="popup bg-black flex flex-col justify-center items-center min-h-screen gap-4">
                    <img src="frontend/Class_Routine_Spring2026_Sec-3.png" class="mx-auto max-w-md rounded-xl shadow-2xl">

                    <a id="downloadBtn" href="Class_Routine_Spring2026_Sec-3.png" download
                       class="px-6 py-3 bg-red-900 text-white rounded-xl hover:bg-red-700 transition">
                        Download Routine
                    </a>
                </div>
                `;

                // Play 'acp.mp3' when the download button is clicked
                document.getElementById("downloadBtn").addEventListener("click", () => {
                    const music = playSound("acp.mp3", 0.5);
                });
            }
        };
        document.addEventListener("keydown", enterHandler);
    });

    // Inner NO Button Click
    document.getElementById("innerNoBtn").addEventListener("click", () => {
        app.innerHTML = `
        <div class="relative min-h-screen flex justify-center items-center bg-black w-full">
            <img src="robodic.jpg" class="mx-auto max-w-lg rounded-xl shadow-2xl">
            <div class="absolute top-4 left-4 text-red-600 bangla-font text-2xl">
                Beware...
            </div>
        </div>
        `;

        // Play sound immediately on click
        const audio = playSound("robodic_sound.mp3", 1);
        
        // Go back to YesPage when audio ends
        audio.onended = () => {
            yesPage();
        };
    });
}

/* NO PAGE LOGIC */
function noPage() {
    document.body.classList.add("flash");
    glitchSound.currentTime = 0;
    glitchSound.play().catch(()=>{}); // Triggered by button click, should work

    setTimeout(() => {
        document.body.classList.remove("flash");

        // Step 1: WTF text
        app.innerHTML = `
        <div class="flex flex-col items-center justify-center h-screen">
            <div class="text-6xl horror-font glitch shake mb-10">WTF</div>
        </div>
        `;

        // Step 2: Hidden video + dummy button (after 3s)
        setTimeout(() => {
            app.innerHTML = `
            <div class="relative flex justify-center items-center w-full">
                <video id="realVideo"
                       class="max-w-3xl w-full mx-auto rounded-xl shadow-2xl opacity-0 transition-opacity duration-500"
                       playsinline>
                    <source src="nikallowde.mp4" type="video/mp4">
                </video>

                <button id="dummyBtn"
                        class="absolute px-8 py-4 bg-black border-2 border-red-700
                               text-red-600 text-2xl horror-font glitch
                               hover:bg-red-900 transition z-50">
                    ▶ BACK
                </button>
            </div>
            `;

            const btn = document.getElementById("dummyBtn");
            const vid = document.getElementById("realVideo");

            // User must interact to play video with sound
            btn.addEventListener("click", () => {
                btn.remove(); // Remove button
                vid.classList.remove("opacity-0"); // Show video
                vid.volume = 1;
                vid.play().catch(e => console.log("Play error:", e));
            });

            // Redirect home when video ends
            vid.onended = () => {
                homePage();
            };

        }, 3000);

    }, 200);
}

/* IDGF PAGE LOGIC */
function idgfPage() {
    app.innerHTML = `
    <div class="relative flex flex-col items-center justify-center min-h-screen bg-black gap-6 w-full">
        <video id="idgfVideo" playsinline controls
               class="max-w-4xl w-full mx-auto rounded-xl shadow-2xl fade-in scale-95 hover:scale-100 transition-all duration-1000">
            <source src="backchodix.mp4" type="video/mp4">
        </video>

        <div class="absolute top-4 left-4 text-red-600 bangla-font text-2xl">
            Nikal bsdk...
        </div>
    </div>
    `;

    const video = document.getElementById("idgfVideo");
    
    // Try to play immediately (this function is called by a button click, so it should work)
    const playPromise = video.play();
    
    if (playPromise !== undefined) {
        playPromise.catch(_ => {
            // If blocked, we rely on the user hitting the 'controls' on the video element
            video.muted = true; // Fallback: mute to allow autoplay
            video.play();
        });
    }

    video.onended = () => {
        homePage();
    };
}

// Initialize
homePage();
</script>

</body>
</html>

